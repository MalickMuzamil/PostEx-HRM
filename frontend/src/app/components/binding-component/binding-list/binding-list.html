<div class="card p-4 shadow-sm">

    <div *ngIf="loading" class="text-center p-4">
        Loading...
    </div>

    <div *ngIf="!loading && data">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">
                {{ data.hierarchy_name || ('Hierarchy ' + data.fh_id) }}
            </h3>

            <span class="badge px-3 py-2" [ngClass]="{
              'bg-success text-white': data.status === 'active',
              'bg-warning text-dark': data.status === 'upcoming',
              'bg-danger text-white': data.status === 'inactive'
            }">
                {{ data.status | uppercase }}
            </span>
        </div>

        <app-table title="Hierarchy Levels" [canView]="canView" [showFilters]="false">

            <!-- TABLE HEAD -->
            <thead>
                <th>Level</th>
                <th>Type</th>
                <th>Node</th>
                <th>Effective From</th>
                <th>Effective To</th>
            </thead>

            <!-- TABLE BODY -->
            <tbody>
                <tr *ngFor="let r of data.rows">
                    <td>{{ r.level_order }}</td>
                    <td>{{ r.type_name }}</td>
                    <td>{{ r.node_name }}</td>
                    <td>{{ data.effective_from | date:'MMM d, yyyy' }}</td>
                    <td>
                        {{ data.effective_to ? (data.effective_to | date:'MMM d, yyyy') : '-' }}
                    </td>
                </tr>
            </tbody>

        </app-table>

        <!-- BACK BUTTON -->
        <div class="text-end mt-3">
            <button class="btn btn-secondary" (click)="back()">
                Back
            </button>
        </div>

    </div>

</div>